{"ast":null,"code":"var _jsxFileName = \"/home/aryo/projek-sistem-terdistribusi/projek-sistem-terdistribusi/ui/src/components/DeviceCard.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport GateControl from './GateControl';\nimport { controlDevice } from '../services/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function DeviceCard({\n  device\n}) {\n  _s();\n  const [busy, setBusy] = useState(false);\n  const state = device.state || {};\n  const toggleLamp = async () => {\n    setBusy(true);\n    try {\n      const next = state.power === 'on' ? 'off' : 'on';\n      await controlDevice(device.id, device.type, next, {});\n    } catch (e) {\n      console.error(e);\n    } finally {\n      setBusy(false);\n    }\n  };\n  const online = state.online !== false; // default assume online unless explicitly false\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"device-id\",\n          children: device.id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"device-type\",\n          children: device.type\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 26,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: online ? /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge-online\",\n          children: \"Online\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 21\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"badge-offline\",\n          children: \"Offline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 31,\n          columnNumber: 68\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 30,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 25,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"device-state\",\n      children: /*#__PURE__*/_jsxDEV(\"pre\", {\n        children: JSON.stringify(state, null, 2)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"controls\",\n      children: [device.type === 'lamp' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"device-actions\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn\",\n          onClick: toggleLamp,\n          disabled: busy,\n          children: state.power === 'on' ? 'Turn off' : 'Turn on'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"btn secondary\",\n          onClick: () => controlDevice(device.id, device.type, 'set_brightness', {\n            value: 80\n          }),\n          children: \"Set 80%\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this), device.type === 'smart_gate' && /*#__PURE__*/_jsxDEV(GateControl, {\n        device: device\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 24,\n    columnNumber: 5\n  }, this);\n}\n_s(DeviceCard, \"1xb9mZubXs1SxY/cOnjkSF8CKNw=\");\n_c = DeviceCard;\nvar _c;\n$RefreshReg$(_c, \"DeviceCard\");","map":{"version":3,"names":["React","useState","GateControl","controlDevice","jsxDEV","_jsxDEV","DeviceCard","device","_s","busy","setBusy","state","toggleLamp","next","power","id","type","e","console","error","online","children","style","display","justifyContent","alignItems","className","fileName","_jsxFileName","lineNumber","columnNumber","JSON","stringify","onClick","disabled","value","_c","$RefreshReg$"],"sources":["/home/aryo/projek-sistem-terdistribusi/projek-sistem-terdistribusi/ui/src/components/DeviceCard.jsx"],"sourcesContent":["import React, {useState} from 'react'\nimport GateControl from './GateControl'\nimport { controlDevice } from '../services/api'\n\nexport default function DeviceCard({device}){\n  const [busy, setBusy] = useState(false)\n  const state = device.state || {}\n\n  const toggleLamp = async ()=>{\n    setBusy(true)\n    try{\n      const next = state.power === 'on' ? 'off' : 'on'\n      await controlDevice(device.id, device.type, next, {})\n    }catch(e){\n      console.error(e)\n    }finally{\n      setBusy(false)\n    }\n  }\n\n  const online = state.online !== false // default assume online unless explicitly false\n\n  return (\n    <div>\n      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>\n        <div>\n          <div className='device-id'>{device.id}</div>\n          <div className='device-type'>{device.type}</div>\n        </div>\n        <div>\n          {online ? <span className='badge-online'>Online</span> : <span className='badge-offline'>Offline</span>}\n        </div>\n      </div>\n\n      <div className='device-state'>\n        <pre>{JSON.stringify(state, null, 2)}</pre>\n      </div>\n\n      <div className='controls'>\n        {device.type === 'lamp' && (\n          <div className='device-actions'>\n            <button className='btn' onClick={toggleLamp} disabled={busy}>{state.power === 'on' ? 'Turn off' : 'Turn on'}</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'set_brightness', {value: 80})}>Set 80%</button>\n          </div>\n        )}\n\n        {device.type === 'smart_gate' && (\n          <GateControl device={device} />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}