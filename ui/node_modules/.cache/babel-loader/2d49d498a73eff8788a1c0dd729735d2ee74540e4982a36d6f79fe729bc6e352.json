{"ast":null,"code":"import React,{useState}from'react';import GateControl from'./GateControl';import{controlDevice}from'../services/api';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function DeviceCard(_ref){let{device}=_ref;const[busy,setBusy]=useState(false);const state=device.state||{};const toggleLamp=async()=>{setBusy(true);try{const next=state.power==='on'?'off':'on';await controlDevice(device.id,device.type,next,{});}catch(e){console.error(e);}finally{setBusy(false);}};const online=state.online!==false;// default assume online unless explicitly false\nreturn/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',justifyContent:'space-between',alignItems:'center'},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"device-id\",children:device.id}),/*#__PURE__*/_jsx(\"div\",{className:\"device-type\",children:device.type})]}),/*#__PURE__*/_jsx(\"div\",{children:online?/*#__PURE__*/_jsx(\"span\",{className:\"badge-online\",children:\"Online\"}):/*#__PURE__*/_jsx(\"span\",{className:\"badge-offline\",children:\"Offline\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"device-state\",children:/*#__PURE__*/_jsx(\"pre\",{children:JSON.stringify(state,null,2)})}),/*#__PURE__*/_jsxs(\"div\",{className:\"controls\",children:[device.type==='lamp'&&/*#__PURE__*/_jsxs(\"div\",{className:\"device-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:toggleLamp,disabled:busy,children:state.power==='on'?'Turn off':'Turn on'}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'set_brightness',{value:80}),children:\"Set 80%\"})]}),device.type==='smart_gate'&&/*#__PURE__*/_jsx(GateControl,{device:device}),device.type==='thermostat'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"target \\xB0C\",defaultValue:state.setpoint||24,id:\"thermo-\".concat(device.id),style:{padding:6,borderRadius:6,border:'1px solid #ddd'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{const v=document.getElementById(\"thermo-\".concat(device.id)).value;controlDevice(device.id,device.type,'set_temp',{target_temp:Number(v)});},children:\"Set\"})]}),device.type==='ac'&&/*#__PURE__*/_jsxs(\"div\",{style:{display:'flex',gap:8},children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"target \\xB0C\",defaultValue:state.target_temp||24,id:\"ac-\".concat(device.id),style:{padding:6,borderRadius:6,border:'1px solid #ddd'}}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>{const v=document.getElementById(\"ac-\".concat(device.id)).value;controlDevice(device.id,device.type,'set_temp',{target_temp:Number(v)});},children:\"Set\"})]}),device.type==='tv'&&/*#__PURE__*/_jsxs(\"div\",{className:\"device-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>controlDevice(device.id,device.type,'power_on'),children:\"Power On\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'power_off'),children:\"Power Off\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'set_volume',{value:Math.max(0,(state.volume||10)-1)}),children:\"Vol -\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'set_volume',{value:(state.volume||10)+1}),children:\"Vol +\"})]}),device.type&&device.type.startsWith('camera')&&/*#__PURE__*/_jsxs(\"div\",{className:\"device-actions\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn\",onClick:()=>controlDevice(device.id,device.type,'snapshot'),children:\"Snapshot\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'start_stream'),children:\"Start Stream\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn secondary\",onClick:()=>controlDevice(device.id,device.type,'stop_stream'),children:\"Stop Stream\"})]})]})]});}","map":{"version":3,"names":["React","useState","GateControl","controlDevice","jsx","_jsx","jsxs","_jsxs","DeviceCard","_ref","device","busy","setBusy","state","toggleLamp","next","power","id","type","e","console","error","online","children","style","display","justifyContent","alignItems","className","JSON","stringify","onClick","disabled","value","gap","placeholder","defaultValue","setpoint","concat","padding","borderRadius","border","v","document","getElementById","target_temp","Number","Math","max","volume","startsWith"],"sources":["/home/aryo/projek-sistem-terdistribusi/projek-sistem-terdistribusi/ui/src/components/DeviceCard.jsx"],"sourcesContent":["import React, {useState} from 'react'\nimport GateControl from './GateControl'\nimport { controlDevice } from '../services/api'\n\nexport default function DeviceCard({device}){\n  const [busy, setBusy] = useState(false)\n  const state = device.state || {}\n\n  const toggleLamp = async ()=>{\n    setBusy(true)\n    try{\n      const next = state.power === 'on' ? 'off' : 'on'\n      await controlDevice(device.id, device.type, next, {})\n    }catch(e){\n      console.error(e)\n    }finally{\n      setBusy(false)\n    }\n  }\n\n  const online = state.online !== false // default assume online unless explicitly false\n\n  return (\n    <div>\n      <div style={{display:'flex',justifyContent:'space-between',alignItems:'center'}}>\n        <div>\n          <div className='device-id'>{device.id}</div>\n          <div className='device-type'>{device.type}</div>\n        </div>\n        <div>\n          {online ? <span className='badge-online'>Online</span> : <span className='badge-offline'>Offline</span>}\n        </div>\n      </div>\n\n      <div className='device-state'>\n        <pre>{JSON.stringify(state, null, 2)}</pre>\n      </div>\n\n      <div className='controls'>\n        {device.type === 'lamp' && (\n          <div className='device-actions'>\n            <button className='btn' onClick={toggleLamp} disabled={busy}>{state.power === 'on' ? 'Turn off' : 'Turn on'}</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'set_brightness', {value: 80})}>Set 80%</button>\n          </div>\n        )}\n\n        {device.type === 'smart_gate' && (\n          <GateControl device={device} />\n        )}\n\n        {device.type === 'thermostat' && (\n          <div style={{display:'flex',gap:8}}>\n            <input type='number' placeholder='target °C' defaultValue={state.setpoint || 24} id={`thermo-${device.id}`} style={{padding:6,borderRadius:6,border:'1px solid #ddd'}} />\n            <button className='btn' onClick={()=>{const v=document.getElementById(`thermo-${device.id}`).value; controlDevice(device.id, device.type, 'set_temp',{target_temp: Number(v)})}}>Set</button>\n          </div>\n        )}\n\n        {device.type === 'ac' && (\n          <div style={{display:'flex',gap:8}}>\n            <input type='number' placeholder='target °C' defaultValue={state.target_temp || 24} id={`ac-${device.id}`} style={{padding:6,borderRadius:6,border:'1px solid #ddd'}} />\n            <button className='btn' onClick={()=>{const v=document.getElementById(`ac-${device.id}`).value; controlDevice(device.id, device.type, 'set_temp',{target_temp: Number(v)})}}>Set</button>\n          </div>\n        )}\n\n        {device.type === 'tv' && (\n          <div className='device-actions'>\n            <button className='btn' onClick={()=>controlDevice(device.id, device.type, 'power_on')}>Power On</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'power_off')}>Power Off</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'set_volume',{value: Math.max(0,(state.volume||10)-1)})}>Vol -</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'set_volume',{value: (state.volume||10)+1})}>Vol +</button>\n          </div>\n        )}\n\n        {device.type && device.type.startsWith('camera') && (\n          <div className='device-actions'>\n            <button className='btn' onClick={()=>controlDevice(device.id, device.type, 'snapshot')}>Snapshot</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'start_stream')}>Start Stream</button>\n            <button className='btn secondary' onClick={()=>controlDevice(device.id, device.type, 'stop_stream')}>Stop Stream</button>\n          </div>\n        )}\n      </div>\n    </div>\n  )\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}